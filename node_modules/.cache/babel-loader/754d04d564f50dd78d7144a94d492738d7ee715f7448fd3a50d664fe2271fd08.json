{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{TextField,Button,Container,Typography}from'@mui/material';import{useParams,useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddEditProduct=()=>{const[product,setProduct]=useState({name:'',category:'',quantity:0});const{id}=useParams();// For editing an existing product\nconst navigate=useNavigate();// Fetch product details if editing\nuseEffect(()=>{if(id){axios.get(`http://192.168.1.99:/api/products/${id}`).then(response=>setProduct(response.data)).catch(error=>console.error('Error fetching product:',error));}},[id]);const handleChange=e=>{const{name,value}=e.target;// If the field is quantity, ensure it's treated as a number\nif(name==='quantity'){setProduct({...product,[name]:value?Number(value):''});}else{setProduct({...product,[name]:value});}};const handleSubmit=e=>{e.preventDefault();if(id){// Edit product\naxios.put(`http://192.168.1.99:/api/products/${id}`,product).then(()=>{navigate('/products');}).catch(error=>console.error('Error updating product:',error));}else{// Add new product\naxios.post('http://192.168.1.99:/api/products',product).then(()=>{navigate('/products');}).catch(error=>console.error('Error adding product:',error));}};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:id?'Edit Product':'Add Product'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{label:\"Product Name\",variant:\"outlined\",fullWidth:true,name:\"name\",value:product.name,onChange:handleChange,style:{marginBottom:'10px'}}),/*#__PURE__*/_jsx(TextField,{label:\"Category\",variant:\"outlined\",fullWidth:true,name:\"category\",value:product.category,onChange:handleChange,style:{marginBottom:'10px'}}),/*#__PURE__*/_jsx(TextField,{label:\"Quantity\",variant:\"outlined\",fullWidth:true,name:\"quantity\"// Corrected to match the field name\n,value:product.quantity,onChange:handleChange,type:\"number\"// Ensures input is numeric\n,style:{marginBottom:'20px'}}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",type:\"submit\",fullWidth:true,children:id?'Update Product':'Add Product'})]})]});};export default AddEditProduct;","map":{"version":3,"names":["React","useState","useEffect","axios","TextField","Button","Container","Typography","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","AddEditProduct","product","setProduct","name","category","quantity","id","navigate","get","then","response","data","catch","error","console","handleChange","e","value","target","Number","handleSubmit","preventDefault","put","post","children","variant","onSubmit","label","fullWidth","onChange","style","marginBottom","type","color"],"sources":["/home/aziz/emkaProjects/armoireSeche/stock-dashboard/src/AddEditProduct.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { TextField, Button, Container, Typography } from '@mui/material';\nimport { useParams, useNavigate } from 'react-router-dom';\n\nconst AddEditProduct = () => {\n  const [product, setProduct] = useState({ name: '', category: '', quantity: 0 });\n  const { id } = useParams(); // For editing an existing product\n  const navigate = useNavigate();\n\n  // Fetch product details if editing\n  useEffect(() => {\n    if (id) {\n      axios.get(`http://192.168.1.99:/api/products/${id}`)\n        .then(response => setProduct(response.data))\n        .catch(error => console.error('Error fetching product:', error));\n    }\n  }, [id]);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n\n    // If the field is quantity, ensure it's treated as a number\n    if (name === 'quantity') {\n      setProduct({ ...product, [name]: value ? Number(value) : '' });\n    } else {\n      setProduct({ ...product, [name]: value });\n    }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (id) {\n      // Edit product\n      axios.put(`http://192.168.1.99:/api/products/${id}`, product)\n        .then(() => {\n          navigate('/products');\n        })\n        .catch(error => console.error('Error updating product:', error));\n    } else {\n      // Add new product\n      axios.post('http://192.168.1.99:/api/products', product)\n        .then(() => {\n          navigate('/products');\n        })\n        .catch(error => console.error('Error adding product:', error));\n    }\n  };\n\n  return (\n    <Container>\n      <Typography variant=\"h4\">{id ? 'Edit Product' : 'Add Product'}</Typography>\n      <form onSubmit={handleSubmit}>\n        <TextField\n          label=\"Product Name\"\n          variant=\"outlined\"\n          fullWidth\n          name=\"name\"\n          value={product.name}\n          onChange={handleChange}\n          style={{ marginBottom: '10px' }}\n        />\n        <TextField\n          label=\"Category\"\n          variant=\"outlined\"\n          fullWidth\n          name=\"category\"\n          value={product.category}\n          onChange={handleChange}\n          style={{ marginBottom: '10px' }}\n        />\n        <TextField\n          label=\"Quantity\"\n          variant=\"outlined\"\n          fullWidth\n          name=\"quantity\" // Corrected to match the field name\n          value={product.quantity}\n          onChange={handleChange}\n          type=\"number\" // Ensures input is numeric\n          style={{ marginBottom: '20px' }}\n        />\n        <Button variant=\"contained\" color=\"primary\" type=\"submit\" fullWidth>\n          {id ? 'Update Product' : 'Add Product'}\n        </Button>\n      </form>\n    </Container>\n  );\n};\n\nexport default AddEditProduct;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
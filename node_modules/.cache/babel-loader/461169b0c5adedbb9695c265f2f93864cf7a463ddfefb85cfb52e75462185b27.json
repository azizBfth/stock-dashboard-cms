{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{TextField,Button,Container,Typography,MenuItem,Select,InputLabel,FormControl}from'@mui/material';import{useParams,useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddEditStockMovement=()=>{const[stockMovement,setStockMovement]=useState({product:'',type:'',// type will be set to either \"entrée\" or \"sortie\"\nquantity:0,location:'',operator:'',datetime:''});const[products,setProducts]=useState([]);const{id}=useParams();// For editing an existing stock movement\nconst navigate=useNavigate();// Fetch product list for selection\nuseEffect(()=>{axios.get('http://192.168.1.99/api/products').then(response=>setProducts(response.data)).catch(error=>console.error('Error fetching products:',error));if(id){axios.get(`http://192.168.1.99/api/mvt/${id}`).then(response=>setStockMovement(response.data)).catch(error=>console.error('Error fetching stock movement:',error));}},[id]);const handleChange=e=>{const{name,value}=e.target;// Ensure quantity is treated as a number\nif(name==='quantity'){setStockMovement({...stockMovement,[name]:value?Number(value):0});}else{setStockMovement({...stockMovement,[name]:value});}};const handleSubmit=e=>{e.preventDefault();if(id){// Edit stock movement\naxios.put(`http://192.168.1.99/api/mvt/${id}`,stockMovement).then(()=>{navigate('/stockmovements');}).catch(error=>console.error('Error updating stock movement:',error));}else{// Add new stock movement\naxios.post('http://192.168.1.99/api/mvt',stockMovement).then(()=>{navigate('/stockmovements');}).catch(error=>console.error('Error adding stock movement:',error));}};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:id?'Edit Stock Movement':'Add Stock Movement'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,style:{marginBottom:'10px'},children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Product\"}),/*#__PURE__*/_jsx(Select,{label:\"Product\",name:\"product\",value:stockMovement.product,onChange:handleChange,children:products.map(product=>/*#__PURE__*/_jsxs(MenuItem,{value:product._id,children:[product.name,\" \"]},product._id))})]}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,style:{marginBottom:'10px'},children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Movement Type\"}),/*#__PURE__*/_jsxs(Select,{label:\"Movement Type\",name:\"type\",value:stockMovement.type,onChange:handleChange,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"entr\\xE9e\",children:\"Entr\\xE9e\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"sortie\",children:\"Sortie\"})]})]}),/*#__PURE__*/_jsx(TextField,{label:\"Quantity\",variant:\"outlined\",fullWidth:true,name:\"quantity\",value:stockMovement.quantity,onChange:handleChange,type:\"number\"// Ensures quantity is a number\n,style:{marginBottom:'10px'}}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,style:{marginBottom:'10px'},children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Location\"}),/*#__PURE__*/_jsxs(Select,{label:\"Location\",name:\"location\",value:stockMovement.location,onChange:handleChange,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"armoire 01\",children:\"Armoire 01\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"armoire 02\",children:\"Armoire 02\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"armoire 03\",children:\"Armoire 03\"})]})]}),/*#__PURE__*/_jsx(TextField,{label:\"Operator\",variant:\"outlined\",fullWidth:true,name:\"operator\",value:stockMovement.operator,onChange:handleChange,style:{marginBottom:'10px'}}),/*#__PURE__*/_jsx(TextField,{label:\"Datetime\",variant:\"outlined\",fullWidth:true,name:\"datetime\",type:\"datetime-local\",value:stockMovement.datetime,onChange:handleChange,style:{marginBottom:'20px'}}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",type:\"submit\",fullWidth:true,children:id?'Update Stock Movement':'Add Stock Movement'})]})]});};export default AddEditStockMovement;","map":{"version":3,"names":["React","useState","useEffect","axios","TextField","Button","Container","Typography","MenuItem","Select","InputLabel","FormControl","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","AddEditStockMovement","stockMovement","setStockMovement","product","type","quantity","location","operator","datetime","products","setProducts","id","navigate","get","then","response","data","catch","error","console","handleChange","e","name","value","target","Number","handleSubmit","preventDefault","put","post","children","variant","onSubmit","fullWidth","style","marginBottom","label","onChange","map","_id","color"],"sources":["/home/aziz/emkaProjects/armoireSeche/stock-dashboard/src/AddEditStockMovement.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { TextField, Button, Container, Typography, MenuItem, Select, InputLabel, FormControl } from '@mui/material';\nimport { useParams, useNavigate } from 'react-router-dom';\n\nconst AddEditStockMovement = () => {\n    const [stockMovement, setStockMovement] = useState({\n      product: '',\n      type: '', // type will be set to either \"entrée\" or \"sortie\"\n      quantity: 0,\n      location: '',\n      operator: '',\n      datetime: '',\n    });\n    const [products, setProducts] = useState([]);\n    const { id } = useParams(); // For editing an existing stock movement\n    const navigate = useNavigate();\n  \n    // Fetch product list for selection\n    useEffect(() => {\n      axios.get('http://192.168.1.99/api/products')\n        .then(response => setProducts(response.data))\n        .catch(error => console.error('Error fetching products:', error));\n  \n      if (id) {\n        axios.get(`http://192.168.1.99/api/mvt/${id}`)\n          .then(response => setStockMovement(response.data))\n          .catch(error => console.error('Error fetching stock movement:', error));\n      }\n    }, [id]);\n  \n    const handleChange = (e) => {\n      const { name, value } = e.target;\n  \n      // Ensure quantity is treated as a number\n      if (name === 'quantity') {\n        setStockMovement({ ...stockMovement, [name]: value ? Number(value) : 0 });\n      } else {\n        setStockMovement({ ...stockMovement, [name]: value });\n      }\n    };\n  \n    const handleSubmit = (e) => {\n      e.preventDefault();\n      if (id) {\n        // Edit stock movement\n        axios.put(`http://192.168.1.99/api/mvt/${id}`, stockMovement)\n          .then(() => {\n            navigate('/stockmovements');\n          })\n          .catch(error => console.error('Error updating stock movement:', error));\n      } else {\n        // Add new stock movement\n        axios.post('http://192.168.1.99/api/mvt', stockMovement)\n          .then(() => {\n            navigate('/stockmovements');\n          })\n          .catch(error => console.error('Error adding stock movement:', error));\n      }\n    };\n  \n    return (\n      <Container>\n        <Typography variant=\"h4\">{id ? 'Edit Stock Movement' : 'Add Stock Movement'}</Typography>\n        <form onSubmit={handleSubmit}>\n          <FormControl fullWidth style={{ marginBottom: '10px' }}>\n            <InputLabel>Product</InputLabel>\n            <Select\n              label=\"Product\"\n              name=\"product\"\n              value={stockMovement.product}\n              onChange={handleChange}\n            >\n              {products.map((product) => (\n                <MenuItem key={product._id} value={product._id}>\n                  {product.name} {/* Render product name */}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n  \n          <FormControl fullWidth style={{ marginBottom: '10px' }}>\n            <InputLabel>Movement Type</InputLabel>\n            <Select\n              label=\"Movement Type\"\n              name=\"type\"\n              value={stockMovement.type}\n              onChange={handleChange}\n            >\n              <MenuItem value=\"entrée\">Entrée</MenuItem>\n              <MenuItem value=\"sortie\">Sortie</MenuItem>\n            </Select>\n          </FormControl>\n\n          <TextField\n            label=\"Quantity\"\n            variant=\"outlined\"\n            fullWidth\n            name=\"quantity\"\n            value={stockMovement.quantity}\n            onChange={handleChange}\n            type=\"number\" // Ensures quantity is a number\n            style={{ marginBottom: '10px' }}\n          />\n          <FormControl fullWidth style={{ marginBottom: '10px' }}>\n            <InputLabel>Location</InputLabel>\n            <Select\n              label=\"Location\"\n              name=\"location\"\n              value={stockMovement.location}\n              onChange={handleChange}\n            >\n              <MenuItem value=\"armoire 01\">Armoire 01</MenuItem>\n              <MenuItem value=\"armoire 02\">Armoire 02</MenuItem>\n              <MenuItem value=\"armoire 03\">Armoire 03</MenuItem>\n            </Select>\n          </FormControl>\n  \n          <TextField\n            label=\"Operator\"\n            variant=\"outlined\"\n            fullWidth\n            name=\"operator\"\n            value={stockMovement.operator}\n            onChange={handleChange}\n            style={{ marginBottom: '10px' }}\n          />\n          <TextField\n            label=\"Datetime\"\n            variant=\"outlined\"\n            fullWidth\n            name=\"datetime\"\n            type=\"datetime-local\"\n            value={stockMovement.datetime}\n            onChange={handleChange}\n            style={{ marginBottom: '20px' }}\n          />\n  \n          <Button variant=\"contained\" color=\"primary\" type=\"submit\" fullWidth>\n            {id ? 'Update Stock Movement' : 'Add Stock Movement'}\n          </Button>\n        </form>\n      </Container>\n    );\n};\n\nexport default AddEditStockMovement;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,SAAS,CAAEC,MAAM,CAAEC,SAAS,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,MAAM,CAAEC,UAAU,CAAEC,WAAW,KAAQ,eAAe,CACnH,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1D,KAAM,CAAAC,oBAAoB,CAAGA,CAAA,GAAM,CAC/B,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAGnB,QAAQ,CAAC,CACjDoB,OAAO,CAAE,EAAE,CACXC,IAAI,CAAE,EAAE,CAAE;AACVC,QAAQ,CAAE,CAAC,CACXC,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EACZ,CAAC,CAAC,CACF,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAG3B,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAAE4B,EAAG,CAAC,CAAGjB,SAAS,CAAC,CAAC,CAAE;AAC5B,KAAM,CAAAkB,QAAQ,CAAGjB,WAAW,CAAC,CAAC,CAE9B;AACAX,SAAS,CAAC,IAAM,CACdC,KAAK,CAAC4B,GAAG,CAAC,kCAAkC,CAAC,CAC1CC,IAAI,CAACC,QAAQ,EAAIL,WAAW,CAACK,QAAQ,CAACC,IAAI,CAAC,CAAC,CAC5CC,KAAK,CAACC,KAAK,EAAIC,OAAO,CAACD,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAAC,CAEnE,GAAIP,EAAE,CAAE,CACN1B,KAAK,CAAC4B,GAAG,CAAC,+BAA+BF,EAAE,EAAE,CAAC,CAC3CG,IAAI,CAACC,QAAQ,EAAIb,gBAAgB,CAACa,QAAQ,CAACC,IAAI,CAAC,CAAC,CACjDC,KAAK,CAACC,KAAK,EAAIC,OAAO,CAACD,KAAK,CAAC,gCAAgC,CAAEA,KAAK,CAAC,CAAC,CAC3E,CACF,CAAC,CAAE,CAACP,EAAE,CAAC,CAAC,CAER,KAAM,CAAAS,YAAY,CAAIC,CAAC,EAAK,CAC1B,KAAM,CAAEC,IAAI,CAAEC,KAAM,CAAC,CAAGF,CAAC,CAACG,MAAM,CAEhC;AACA,GAAIF,IAAI,GAAK,UAAU,CAAE,CACvBpB,gBAAgB,CAAC,CAAE,GAAGD,aAAa,CAAE,CAACqB,IAAI,EAAGC,KAAK,CAAGE,MAAM,CAACF,KAAK,CAAC,CAAG,CAAE,CAAC,CAAC,CAC3E,CAAC,IAAM,CACLrB,gBAAgB,CAAC,CAAE,GAAGD,aAAa,CAAE,CAACqB,IAAI,EAAGC,KAAM,CAAC,CAAC,CACvD,CACF,CAAC,CAED,KAAM,CAAAG,YAAY,CAAIL,CAAC,EAAK,CAC1BA,CAAC,CAACM,cAAc,CAAC,CAAC,CAClB,GAAIhB,EAAE,CAAE,CACN;AACA1B,KAAK,CAAC2C,GAAG,CAAC,+BAA+BjB,EAAE,EAAE,CAAEV,aAAa,CAAC,CAC1Da,IAAI,CAAC,IAAM,CACVF,QAAQ,CAAC,iBAAiB,CAAC,CAC7B,CAAC,CAAC,CACDK,KAAK,CAACC,KAAK,EAAIC,OAAO,CAACD,KAAK,CAAC,gCAAgC,CAAEA,KAAK,CAAC,CAAC,CAC3E,CAAC,IAAM,CACL;AACAjC,KAAK,CAAC4C,IAAI,CAAC,6BAA6B,CAAE5B,aAAa,CAAC,CACrDa,IAAI,CAAC,IAAM,CACVF,QAAQ,CAAC,iBAAiB,CAAC,CAC7B,CAAC,CAAC,CACDK,KAAK,CAACC,KAAK,EAAIC,OAAO,CAACD,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CAAC,CACzE,CACF,CAAC,CAED,mBACEnB,KAAA,CAACX,SAAS,EAAA0C,QAAA,eACRjC,IAAA,CAACR,UAAU,EAAC0C,OAAO,CAAC,IAAI,CAAAD,QAAA,CAAEnB,EAAE,CAAG,qBAAqB,CAAG,oBAAoB,CAAa,CAAC,cACzFZ,KAAA,SAAMiC,QAAQ,CAAEN,YAAa,CAAAI,QAAA,eAC3B/B,KAAA,CAACN,WAAW,EAACwC,SAAS,MAACC,KAAK,CAAE,CAAEC,YAAY,CAAE,MAAO,CAAE,CAAAL,QAAA,eACrDjC,IAAA,CAACL,UAAU,EAAAsC,QAAA,CAAC,SAAO,CAAY,CAAC,cAChCjC,IAAA,CAACN,MAAM,EACL6C,KAAK,CAAC,SAAS,CACfd,IAAI,CAAC,SAAS,CACdC,KAAK,CAAEtB,aAAa,CAACE,OAAQ,CAC7BkC,QAAQ,CAAEjB,YAAa,CAAAU,QAAA,CAEtBrB,QAAQ,CAAC6B,GAAG,CAAEnC,OAAO,eACpBJ,KAAA,CAACT,QAAQ,EAAmBiC,KAAK,CAAEpB,OAAO,CAACoC,GAAI,CAAAT,QAAA,EAC5C3B,OAAO,CAACmB,IAAI,CAAC,GAAC,GADFnB,OAAO,CAACoC,GAEb,CACX,CAAC,CACI,CAAC,EACE,CAAC,cAEdxC,KAAA,CAACN,WAAW,EAACwC,SAAS,MAACC,KAAK,CAAE,CAAEC,YAAY,CAAE,MAAO,CAAE,CAAAL,QAAA,eACrDjC,IAAA,CAACL,UAAU,EAAAsC,QAAA,CAAC,eAAa,CAAY,CAAC,cACtC/B,KAAA,CAACR,MAAM,EACL6C,KAAK,CAAC,eAAe,CACrBd,IAAI,CAAC,MAAM,CACXC,KAAK,CAAEtB,aAAa,CAACG,IAAK,CAC1BiC,QAAQ,CAAEjB,YAAa,CAAAU,QAAA,eAEvBjC,IAAA,CAACP,QAAQ,EAACiC,KAAK,CAAC,WAAQ,CAAAO,QAAA,CAAC,WAAM,CAAU,CAAC,cAC1CjC,IAAA,CAACP,QAAQ,EAACiC,KAAK,CAAC,QAAQ,CAAAO,QAAA,CAAC,QAAM,CAAU,CAAC,EACpC,CAAC,EACE,CAAC,cAEdjC,IAAA,CAACX,SAAS,EACRkD,KAAK,CAAC,UAAU,CAChBL,OAAO,CAAC,UAAU,CAClBE,SAAS,MACTX,IAAI,CAAC,UAAU,CACfC,KAAK,CAAEtB,aAAa,CAACI,QAAS,CAC9BgC,QAAQ,CAAEjB,YAAa,CACvBhB,IAAI,CAAC,QAAS;AAAA,CACd8B,KAAK,CAAE,CAAEC,YAAY,CAAE,MAAO,CAAE,CACjC,CAAC,cACFpC,KAAA,CAACN,WAAW,EAACwC,SAAS,MAACC,KAAK,CAAE,CAAEC,YAAY,CAAE,MAAO,CAAE,CAAAL,QAAA,eACrDjC,IAAA,CAACL,UAAU,EAAAsC,QAAA,CAAC,UAAQ,CAAY,CAAC,cACjC/B,KAAA,CAACR,MAAM,EACL6C,KAAK,CAAC,UAAU,CAChBd,IAAI,CAAC,UAAU,CACfC,KAAK,CAAEtB,aAAa,CAACK,QAAS,CAC9B+B,QAAQ,CAAEjB,YAAa,CAAAU,QAAA,eAEvBjC,IAAA,CAACP,QAAQ,EAACiC,KAAK,CAAC,YAAY,CAAAO,QAAA,CAAC,YAAU,CAAU,CAAC,cAClDjC,IAAA,CAACP,QAAQ,EAACiC,KAAK,CAAC,YAAY,CAAAO,QAAA,CAAC,YAAU,CAAU,CAAC,cAClDjC,IAAA,CAACP,QAAQ,EAACiC,KAAK,CAAC,YAAY,CAAAO,QAAA,CAAC,YAAU,CAAU,CAAC,EAC5C,CAAC,EACE,CAAC,cAEdjC,IAAA,CAACX,SAAS,EACRkD,KAAK,CAAC,UAAU,CAChBL,OAAO,CAAC,UAAU,CAClBE,SAAS,MACTX,IAAI,CAAC,UAAU,CACfC,KAAK,CAAEtB,aAAa,CAACM,QAAS,CAC9B8B,QAAQ,CAAEjB,YAAa,CACvBc,KAAK,CAAE,CAAEC,YAAY,CAAE,MAAO,CAAE,CACjC,CAAC,cACFtC,IAAA,CAACX,SAAS,EACRkD,KAAK,CAAC,UAAU,CAChBL,OAAO,CAAC,UAAU,CAClBE,SAAS,MACTX,IAAI,CAAC,UAAU,CACflB,IAAI,CAAC,gBAAgB,CACrBmB,KAAK,CAAEtB,aAAa,CAACO,QAAS,CAC9B6B,QAAQ,CAAEjB,YAAa,CACvBc,KAAK,CAAE,CAAEC,YAAY,CAAE,MAAO,CAAE,CACjC,CAAC,cAEFtC,IAAA,CAACV,MAAM,EAAC4C,OAAO,CAAC,WAAW,CAACS,KAAK,CAAC,SAAS,CAACpC,IAAI,CAAC,QAAQ,CAAC6B,SAAS,MAAAH,QAAA,CAChEnB,EAAE,CAAG,uBAAuB,CAAG,oBAAoB,CAC9C,CAAC,EACL,CAAC,EACE,CAAC,CAElB,CAAC,CAED,cAAe,CAAAX,oBAAoB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}